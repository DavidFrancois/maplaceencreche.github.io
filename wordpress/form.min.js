"use strict";jQuery(document).ready(function(){var e="DD/MM/YYYY",i={previousMonth:"Mois précédent",nextMonth:"Mois suivant",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]};$(".mpec-date").each(function(a,t){new Pikaday({field:t,firstDay:1,format:e,i18n:i})});var a=$('select[name="children_number"]');a.change(function(){if("redNaoNone"!==a.val())for(var e=1;e<=a.val();e++)$("#child"+e).fadeIn(),$("#child"+e+" input").prop("required",!0),$("#child"+(e+1)+", #child"+(e+2)).fadeOut(),$("#child"+(e+1)+" input, #child"+(e+2)+" input").prop("required",!1);else $("#child1, #child2, #child3").fadeOut()});var t=$("#zip"),r=$("#city");if(t.autocomplete({source:function(e,i){$.ajax({url:"https://icare.maplaceencreche.com/api/static/zipcode/"+e.term,dataType:"json",success:function(e){i($.map(e,function(e){return e.z+", "+e.c}))}})},select:function(e,i){r.val(i.item.value.substring(7))},minLength:3}),t.focusout(function(){var e=$(this).val();$(this).val(e.slice(0,5))}),t.change(function(){t.val().length<4&&r.val("")}),null!==localStorage.getItem("MPECData")){var n=JSON.parse(localStorage.getItem("MPECData")).meta;for(var c in n){var l=n[c];$("#meta-inputs").append('<input type="hidden" name="meta_'+c+'" value="'+l+'">')}}var o=$("#main-submit > span").html();$("form#family-register").submit(function(e){e.preventDefault(),$("#main-submit").attr("disabled",!0),$("#main-submit > span").html("Inscription en cours ..."),$(".error-block").html(""),r.prop("disabled",!1),$.ajax({url:"https://icare.maplaceencreche.com/api/input/register",type:"post",dataType:"json",data:$(this).serialize(),success:function(e){window.location.href="/merci-famille",$("#city").prop("disabled",!0)},error:function(e){$("#city").prop("disabled",!0),$(".error-block").html("Une erreur est survenue lors de l'envoi du formulaire, veuillez réessayer."),$("#main-submit > span").html(o),$("#main-submit").attr("disabled",!1)}})})});